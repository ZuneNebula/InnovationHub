<mat-spinner style="margin-top: 20%;margin-left: 50%;" *ngIf="!wait"></mat-spinner>

<div *ngIf="wait" style="width: 100%;">
    <div style="float: left;width: 40%;">
        <div style=" width: 81%;margin-left: 12%; background-color: rgb(243, 243, 243); box-shadow: 5px 10px 18px gray; padding: 25px;margin-top: 20px;">

            <div style="background-color: rgb(163, 163, 163);height: 50px;width: 110%;margin-top: -25px;margin-left: -24px;">
                <h1 style="margin-left: 20px;padding-top: 10px;">Innovation Details</h1>
            </div>
            
            <h1 style="color: black; text-align: center; font-weight: 700; font-family: Verdana, Geneva, Tahoma, sans-serif;">
                {{innovation.innovationName}}</h1>
            

            <img style="margin-left: 33%; width: 150px;height: 150px; border-radius: 50%;"
                src={{innovation.coverPhoto.content}} onerror="this.src='assets/default.png'" alt="cover img">
            <br>
            <span style="font-weight: 700;margin-left: 170px;">Innovator: {{innovation.name}}</span>
            <br><br>

            <h1 style="font-weight: 400;color: black;"> Description</h1>
            <p style="margin-top: -15px;color: black;margin-right: 20px;">{{innovation.innovationDesc}}</p>
            

            <h1 style="font-weight: 400;color: black;"> Documents uploaded</h1>

            <!-- <mat-chip-list style="float: left;margin-left: 2%;margin-bottom: 2%;" *ngFor="let one of innovation.uploadedFiles">
                <mat-chip style="background-color: rgb(227, 141, 235);" mat-raised-button
                    (click)=viewdoc()><a style="text-decoration: none; color: black;" [href]="fileUrl"
                        download={{one.fileName}}.{{one.extension}}>
                        <mat-icon style="margin-top: 5px;">file_download</mat-icon>{{one.fileName}}.{{one.extension}}
                    </a></mat-chip>
                <br><br>
                </mat-chip-list> -->
                <mat-chip-list style="float: left;margin-left: 0%;" #chipList aria-label="doc selection">
                    <mat-chip *ngFor="let doc of innovation.uploadedFiles;" style="background-color: white;border: 1px rgb(25, 71, 31) solid;">
                        <mat-icon>file_present</mat-icon>
                        {{doc.fileName}}
                      <button mat-button (click)="viewdoc(doc.content)" style="padding:5px;min-width: 0;">
                        <a style="text-decoration: none; color: black;" [href]="fileUrl" 
                        download={{doc.fileName}}.{{doc.extension}}><mat-icon style="vertical-align: middle; margin:0">download</mat-icon></a>
                      </button>
                    </mat-chip>
                </mat-chip-list>
                
                <br>


        </div>
    </div>
    <div style="float: right;width: 48%;background-color: rgb(255, 255, 255);padding-left: 0.9%;padding-top: 42px;margin-right: 5%;margin-left: 5%;margin-top: 20px;box-shadow: 5px 10px 18px gray;">
        <div >
            <div style="background-color: rgb(163, 163, 163);height: 50px;width: 102%;margin-top: -42px;margin-left: -13px;">
                <h1 style="margin-left: 85px;padding-top: 10px;">Edit Proposal</h1>
            </div>
            <br>
            
            <mat-form-field style="margin-left: 75px;width: 500px;">
                <mat-label style="color: black;">Proposal Title</mat-label>
                
                <input matInput value={{proposalObj.proposalTitle}} [(ngModel)]="proposalObj.proposalTitle">
                
            </mat-form-field>
            
            <mat-form-field style="margin-left: 75px;width: 500px;font-size: 1.3em;">
                <mat-label style="color: black;">Proposal Description</mat-label>
                
                <textarea rows="3" matInput value={{proposalObj.proposalDescription}} [(ngModel)]="proposalObj.proposalDescription"></textarea>
            </mat-form-field>

            <div>
                <label style="margin-left: 10%;font-size: medium;font-weight: 700;">Proposal Image</label>
                <br>
                <img style="width: 300px; height: 180px; margin-left: 10%;border-radius: 2%;" src={{proposalObj.coverImage.content}} onerror="this.src='assets/default.png'"
                    alt="proposal image">
                <br>
                <label
                    style="float: right;margin-top: -20%;margin-right: 15%;font-size: medium;font-weight: 500;">Change
                    Proposal Image</label>
                    <br>
                <input style="float: right;margin-top: -20%;margin-right: 3.5%;" type="file" (change)="onChange($event, 'image')">
            </div>
            

            <div>
                <label style="margin-left: 10%;font-size: medium;font-weight: 700;">Proposal Document</label>
                <br><br>
                <label style="font-size: medium;font-weight: 500;margin-left: 10%;">Add Proposal Document</label>
                <input style="margin-left: 5%;" type="file" (change)="onChangeDoc($event, 'document')">
            </div>

            <br><br>
            <button (click)="delete()" mat-raised-button 
                style=" margin-left: 50%;box-shadow: 5px 10px 18px gray;">DELETE</button>
            
            <button (click)="dashboard()" mat-raised-button 
                style="margin-left: 2%;box-shadow: 5px 10px 18px gray;">CANCEL</button>

            <button (click)="update()" mat-raised-button color="primary"
                style=" position: relative; margin-left: 2%;box-shadow: 5px 10px 18px gray;">SAVE</button>
            <br><br>
        </div>




    </div>
